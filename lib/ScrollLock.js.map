{"version":3,"sources":["../src/ScrollLock.jsx"],"names":["upKeys","downKeys","ScrollLock","props","forEach","func","bind","enabled","listenToScrollEvents","scrollingElement","stopListeningToScrollEvents","nextProps","fn","r","firstChild","e","delta","isDeltaPositive","elem","scrollTop","scrollHeight","clientHeight","shouldCancelScroll","cancelScrollEvent","handleEventDelta","deltaY","touchStart","changedTouches","clientY","indexOf","keyCode","stopImmediatePropagation","preventDefault","el","addEventListener","onWheelHandler","onTouchStartHandler","onTouchMoveHandler","onKeyDownHandler","removeEventListener","className","setScrollingElement","cloneElement","children","tabIndex","style","outline","propTypes","bool","string","defaultProps"],"mappings":"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","file":"ScrollLock.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\n\nconst upKeys = [\n    33, // pageUp\n    38  // arrowUp\n];\nconst downKeys = [\n    32, // space\n    34, // pageDown\n    40  // arrowDown\n];\n\nexport default class ScrollLock extends Component {\n    static propTypes = {\n        enabled: PropTypes.bool,\n        className: PropTypes.string\n    }\n\n    static defaultProps = {\n        enabled: true,\n        className: ''\n    }\n\n    constructor(props) {\n        super(props);\n        [\n            'listenToScrollEvents',\n            'stopListeningToScrollEvents',\n            'handleEventDelta',\n            'onWheelHandler',\n            'onTouchStartHandler',\n            'onTouchMoveHandler',\n            'onKeyDownHandler',\n            'setScrollingElement',\n            'cancelScrollEvent'\n        ].forEach((func) => { this[func] = this[func].bind(this); });\n    }\n\n    componentDidMount() {\n        if (this.props.enabled) {\n            this.listenToScrollEvents(this.scrollingElement);\n        }\n    }\n    componentWillUnmount() {\n        this.stopListeningToScrollEvents(this.scrollingElement);\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.props.enabled !== nextProps.enabled) {\n            const fn = nextProps.enabled ?\n                this.listenToScrollEvents :\n                this.stopListeningToScrollEvents;\n\n            fn(this.scrollingElement);\n        }\n    }\n\n    setScrollingElement(r) {\n        this.scrollingElement = r && r.firstChild;\n    }\n\n    handleEventDelta(e, delta) {\n        const isDeltaPositive = delta > 0;\n        const elem = this.scrollingElement;\n        const { scrollTop, scrollHeight, clientHeight } = elem;\n\n        let shouldCancelScroll = false;\n        if (isDeltaPositive && delta > scrollHeight - clientHeight - scrollTop) {\n            // bottom limit\n            elem.scrollTop = scrollHeight;\n            shouldCancelScroll = true;\n        } else if (!isDeltaPositive && -delta > scrollTop) {\n            // top limit\n            elem.scrollTop = 0;\n            shouldCancelScroll = true;\n        }\n\n        if (shouldCancelScroll) {\n            this.cancelScrollEvent(e);\n        }\n    }\n\n    onWheelHandler(e) {\n        this.handleEventDelta(e, e.deltaY);\n    }\n\n    onTouchStartHandler(e) {\n        // set touch start so we can calculate touchmove delta\n        this.touchStart = e.changedTouches[0].clientY;\n    }\n\n    onTouchMoveHandler(e) {\n        const delta = this.touchStart - e.changedTouches[0].clientY;\n        this.handleEventDelta(e, delta);\n    }\n\n    onKeyDownHandler(e) {\n        if (upKeys.indexOf(e.keyCode) >= 0) {\n            this.handleEventDelta(e, -1);\n        } else if (downKeys.indexOf(e.keyCode) >= 0) {\n            this.handleEventDelta(e, 1);\n        }\n    }\n\n    cancelScrollEvent(e) {\n        e.stopImmediatePropagation();\n        e.preventDefault();\n        return false;\n    }\n\n    listenToScrollEvents(el) {\n        el.addEventListener('wheel', this.onWheelHandler, false);\n        el.addEventListener('touchstart', this.onTouchStartHandler, false);\n        el.addEventListener('touchmove', this.onTouchMoveHandler, false);\n        el.addEventListener('keydown', this.onKeyDownHandler, false);\n    }\n\n    stopListeningToScrollEvents(el) {\n        el.removeEventListener('wheel', this.onWheelHandler, false);\n        el.removeEventListener('touchstart', this.onTouchStartHandler, false);\n        el.removeEventListener('touchmove', this.onTouchMoveHandler, false);\n        el.removeEventListener('keydown', this.onKeyDownHandler, false);\n    }\n\n    render() {\n        return (\n            <div className={this.props.className} ref={this.setScrollingElement}>\n                {React.cloneElement(\n                    this.props.children,\n                    {\n                        tabIndex: 0,\n                        style: { outline: 'none' }\n                    }\n                )}\n            </div>\n        );\n    }\n}\n"]}